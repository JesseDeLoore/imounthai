{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}

    <div class="row">
        <div class="col-3"></div>
        <div class="col-6">
            {% if form.errors %}
                <p>Your username and password didn't match. Please try again.</p>
            {% endif %}

            {% if next %}
                {% if user.is_authenticated %}
                    <p>Your account doesn't have access to this page. To proceed,
                        please login with an account that has access.</p>
                {% else %}
                    <p>Please login to see this page.</p>
                {% endif %}
            {% endif %}
            <a href="{% url 'social:begin' 'facebook' %}?next={{ request.path }}">Login with Facebook</a>
            <a href="{% url 'social:begin' 'google-oauth2' %}?next={{ request.path }}">Login with Google</a>
            <a href="{% url 'social:begin' 'twitter' %}?next={{ request.path }}">Login with Twitter</a>
            <a href="{% url 'social:begin' 'instagram' %}?next={{ request.path }}">Login with Instagram</a>
            <a href="{% url 'social:begin' 'weibo' %}?next={{ request.path }}">Login with Weibo</a>
            <form method="post" action="{% url 'login' %}">
                {% csrf_token %}
                {{ form|crispy }}
                <div>
                    <input class="btn btn-primary" type="submit" value="login"/>
                    <input type="hidden" name="next" value="{{ next }}"/>
                </div>
            </form>
            <p><a href="{% url 'password_reset' %}">Lost password?</a></p>
        </div>
        <div class="col-3"></div>
    </div>
    {# Assumes you setup the password_reset view in your URLconf #}

{% endblock %}